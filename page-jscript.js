var dictionary = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','@','?','/','%','&','#'];
var title;
var etext;

window.onload = function () {
    etext = this.document.getElementById("titletext").innerHTML;
    title = this.document.getElementById("blogtitle");
    title.addEventListener('animationiteration',decrypt1);
    title.addEventListener('animationend', function(){
        title.innerHTML = etext;
    });
}

window.addEventListener ("scroll", function(){
    if(window.scrollY>100){
        this.document.getElementById("header").style.position = "fixed";
        this.document.getElementById("header").style.boxShadow = "5px 2px 2px 0 gray"; //h-offset v-offset blur spread color
        this.document.getElementById("header").style.animation = "navdown 0.5s 1";
        this.document.getElementById("backtotop").style.animation = "backtotop-up 0.5s 1";
        this.document.getElementById("backtotop").style.visibility = "visible";
    }
    if(window.scrollY<=0){
        this.document.getElementById("backtotop").style.visibility = "hidden";
        this.document.getElementById("backtotop").style.animation = "";
        this.document.getElementById("header").style.position = "relative";
        this.document.getElementById("header").style.boxShadow = "none";
        this.document.getElementById("header").style.animation = "";
    }
})

function rand() {
    var x = Math.floor(Math.random()*dictionary.length);
    return x;
}

function decrypt1() {
    var i;
    var dtext = ""
    for (i=0; i < etext.length; i++) {
        if(etext[i]==' '){
            dtext = dtext + " ";
        } else {
            dtext = dtext + dictionary[rand()];
        }
        title.innerHTML = dtext;
    }
}

function isInViewPort(element) {
    const {top, bottom} = element.getBoundingClientRec();
    const vHeight = (window.innerHeight || document.documentElement.clientHeight);

    return (
        (top > 0 || bottom > 0) && top < vHeight
    );
}
